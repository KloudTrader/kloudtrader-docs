---
id: analysis_api
title: Analysis
sidebar_label: Analysis
---

## Technical, portfolio, risk analysis APIs for your quantitative trading algorithms.
> #### Important
> 
> The algorithm you want to deploy should be in a file called **main.py**
> 
> Your algorithm must have these imports:
> 
> **from libkloudtrader.defaults import ACCESS_TOKEN, ACCOUNT_NUMBER**
> 
> This will help Narwhal to access your access token and account number from the Narwhal Environment so that you don't have to explicitly pass them with each API call. Narwhal would not be able to load your access token and account number from the Narwhal Environment if you don't link your tradier account. So the best practice is to link your tradier account before deploying your Trading Algorithm.

> Note: Your access token will expire after 24 hours. In order to allow your deployed algorithm to trade seemlessly, please manually link your tradier account after 24 hours. Don't worry this is just in Beta Version and will be automated soon!       
### Analysis API Index
#### libkloudtrader provides various analysis APIs. The list below consists of the APIs that are currently implemented and the ones that are coming soon!
| Analysis Functions (A-Z)|Status 
| -------------     |:-------------:|
| Accumulation/Distribution Index| âœ… 
| Absolute Price Oscillator| âœ… 
| Advance Decline Line| ðŸ”œ
| Advance Decline Ratio| ðŸ”œ
| Alpha |âœ… 
| Annual Return| âœ… 
| Annual Sharpe Ratio|âœ… 
| Annual Volatility| âœ… 
| Arnaud Legoux Moving Average| ðŸ”œ
| Aroon|âœ… 
| Aroon Oscillator |âœ… 
| Average Directional Movement Index|âœ… 
| Average Directional Movement Index Rating|âœ… 
| Average Price | âœ… 
| Average True Range| âœ… 
| Awesome Oscillator| âœ… 
| Balance of Power|âœ… 
| Beta|âœ… 
| Berke Ratio| ðŸ”œ
| Bollinger Bands|âœ… 
| Calmar Ratio|âœ… 
| CAGR (Compounded Annual Growth Rate)|âœ… 
| Chaikin Money Flow|âœ…
| Chaikin Oscillator|âœ…
| Chande Kroll Stop| ðŸ”œ
| Chande Momentum Oscillator| âœ…
| Choppiness Index| ðŸ”œ
| Commodity Channel Index| âœ…
| ConnorsRSI| ðŸ”œ
| Coppock Curve|âœ… 
| Conditional Sharpe ratio| ðŸ”œ
| Correlation Cofficient|âœ… 
| Cumulative Returns |âœ… 
| Cumulative Volume Index| ðŸ”œ
| Daily Returns|âœ… 
| Daily Log Returns|âœ… 
| Daily volatility|âœ… 
| Detrended Price Oscillator| âœ…
| Directional Movement Index|âœ…
| Donchian Channels|âœ…
| Double EMA |âœ…
| Downside Risk|âœ… 
| Ease of Movement| âœ…
| EMA|âœ…
| Envelope Indicator| ðŸ”œ
| Excess return on VaR| ðŸ”œ
| Expected shortfall| ðŸ”œ
| Fisher Transform| ðŸ”œ 
| Force Index| âœ…
| Hilbert Transform - Instantaneous Trendline|âœ…
| Hilbert Transform - Dominant Cycle Period|âœ…
| Hilbert Transform - Dominant Cycle Phase|âœ…
| Hilbert Transform - Phasor Components|âœ…
| Hilbert Transform - SineWave|âœ…
| Hilbert Transform - Trend vs Cycle Mode|âœ…
| Hull Moving Average |âœ… 
| Ichimoku Cloud|âœ…
| Information Ratio|âœ… 
| Jensen's Alpha| ðŸ”œ
| Kaufman Adaptive Moving Average|âœ…
| Keltner Channels |âœ…
| Klinger Oscillator | ðŸ”œ
| Know sure thing/KST|âœ…
| Kurtosis|âœ… 
| Least Squares Moving Average| ðŸ”œ
| Linear Regression |âœ…
| Linear Regression Angle|âœ…
| Linear Regression Intercept|âœ…
| Linear Regression Slope|âœ…
| Lower partial moments| ðŸ”œ
| MACD (Moving Average Convergence Divergence)|âœ…
| Mass Index |âœ…
| Max Drawdown|âœ… 
| McGinley Dynamic | ðŸ”œ
| MidPoint over period|âœ…
| MidPoint Price over period|âœ…
| Minus Directional Indicator|âœ…
| Minus Directional Movement|âœ…
| Median Price|âœ…
| Momentum |âœ…
| Money Flow | âœ…
| Moon Phases| ðŸ”œ
| Modigliani Ratio| ðŸ”œ
| Moving Average |âœ…
| Moving Volatility|âœ… 
| Negative Volume Index|âœ…
| Normalized Average True Range|âœ…
| On Balance Volume|âœ…
| Omega Ratio|âœ… 
| Parabolic SAR|âœ…
| Percentage Price Oscillator|âœ…
| Pivot Points HIgh Low| ðŸ”œ
| Plus Directional Indicator|âœ…
| Plus Directional Movement|âœ…
| Positive Volume Index| ðŸ”œ
| Rate of Change |âœ… 
| Relative Strength index|âœ… 
| Relative Givor Index| ðŸ”œ
| Relative Volatility Index| ðŸ”œ
| Returns| âœ… 
| Sharpe Ratio|âœ… 
| Simple Moving Average|âœ… 
| Skewness|âœ… 
| SMI Ergodic Indicator | ðŸ”œ
| SMI Ergodic Oscillator | ðŸ”œ
| Sortino Ratio|âœ… 
| Standard Deviation|âœ… 
| Sterling Ratio| ðŸ”œ
| Stochastic Oscillator|âœ… 
| Stochastic RSI|âœ… 
| Tail Ratio|âœ… 
| Time Series Forecast|âœ… 
| Treynor ratio| ðŸ”œ
| TRIX|âœ… 
| Triangular Moving Average|âœ… 
| Triple EMA|âœ… 
| True Range | âœ… 
| True Strength Indicator |âœ… 
| Typical Price|âœ… 
| Ultimate Oscillator |âœ… 
| Upside-potential Ratio| ðŸ”œ
| Value at Risk (Variance-Covariance method)|âœ… 
| Variance|âœ… 
| Vertical Horizontal Filter| ðŸ”œ
| Volatility|âœ… 
| Volatility Stop| ðŸ”œ
| Volume Osciallor | ðŸ”œ
| Volume Price Trend|âœ… 
| Volume adjusted moving average|âœ… 
| Volume weighted moving average| ðŸ”œ
| Vortex Indicator |âœ… 
| VWAP|âœ… 
| Weighted Close Price|âœ… 
| Williams %R|âœ… 
| Williams Aligator | ðŸ”œ
| Williams Fractal | ðŸ”œ
| WMA|âœ… 
| Zig Zag | ðŸ”œ







# Module
<code>libkloudtrader.analysis</code>

### Accumulation/Distribution Index
Developed by Marc Chaikin, the Accumulation Distribution Line is a volume-based indicator designed to measure the cumulative flow of money into and out of a security.<br><br>
<a href="https://stockcharts.com/school/doku.php?id=chart_school:technical_indicators:accumulation_distribution_line" target="_blank">Learn More</a>

<code>accumulation_distribution_index(high,low,close,volume)</code>

| Paramters       | Required/Optional | Description                             | Type |
|-----------------|-------------------|-----------------------------------------|------|
| high         | required          | High prices data       | Pandas dataframe  |
| low          | reqired          | Low prices data | Pandas dataframe|
| close          | reqired          | Close Prices data | Pandas dataframe  |
| volume          | reqired          | Volume data  | Pandas dataframe  |

```python
Example:

from kloudtarder.analysis import accumulation_distribution_index
from kloudtrader.equities.data import OHLCV
import pandas as pd

aapl_data=pd.DataFrame(OHLCV('AAPL','2018-01-01','2019-01-31')['history']['day'])

accumulation_distribution_index(aapl_data['high'],aapl_data['low'],aapl_data['close'],aapl_data['volume'])
```
```python
return type : Pandas Dataframe

0               NaN
1      3.252030e+07
2      4.959698e+06
3      2.035432e+06
4      2.219792e+07
5      8.146040e+06
6      8.897564e+06
            ...
249    1.522707e+07
250   -2.311396e+07
251    3.982507e+06
252   -1.426856e+06
253    1.025702e+07
254    3.727678e+07
255    2.632004e+07
256    3.347596e+07
257    2.911781e+07
258    1.147651e+07
```
***
### Absolute Price Oscillator
Absolute Price Oscillator is a technical indicator calculating the percentage difference between two price moving averages. The Absolute Price Oscillator is the MACD indicator in absolute values.<br><br>
<a href="https://www.marketvolume.com/technicalanalysis/apo.asp" target="_blank">Learn More</a>

<code>absolute_price_oscillator(close,short_period,long_period)</code>

| Paramters       | Required/Optional | Description                             | Type |
|-----------------|-------------------|-----------------------------------------|------|
| close           | required         | Close prices data       | Pandas dataframe  |
| short_period    | reqired          | Short Period/Fast Period | int|
| long_period     | reqired          | Long period/Slow period | int |


```python
Example:

from kloudtarder.analysis import absolute_price_oscillator
from kloudtrader.equities.data import OHLCV
import pandas as pd

aapl_data=pd.DataFrame(OHLCV('AAPL','2018-01-01','2019-01-31')['history']['day'])

absolute_price_oscillator(aapl_data['close'],4,9)
```
```python
return type : Pandas Dataframe

0           NaN
1           NaN
2           NaN
3           NaN
4           NaN
5           NaN
6           NaN
7           NaN
8      0.334722
9     -1.698611
10    -3.473056
11    -4.962222
12    -3.864444
13    -1.796111
14     0.976944
15     2.807778
16     4.387500
17     4.363889
18     2.678056
19     1.762778
20     0.827500
        ...
254    2.469444
255    2.129722
256    4.135556
257    4.622500
258    4.882222
```
***
### Alpha
Alpha is a measure of the active return on an investment, the performance of that investment compared with a suitable market index. An alpha of 1% means the investment's return on investment over a selected period of time was 1% better than the market during that same period; a negative alpha means the investment underperformed the market.<br><br>
<a href="https://en.wikipedia.org/wiki/Alpha_(finance)" target="_blank">Learn More</a>

<code>alpha(close,benchmark_close)</code>

| Paramters       | Required/Optional | Description                             | Type |
|-----------------|-------------------|-----------------------------------------|------|
| close           | required         | Close prices data       | Pandas dataframe  |
| benchmark_close   | reqired          | Close prices data of market or benchmark like SPY, etc | Pandas dataframe |



```python
Example:

from kloudtarder.analysis import alpha
from kloudtrader.equities.data import OHLCV
import pandas as pd

aapl_data=pd.DataFrame(OHLCV('AAPL','2018-01-01','2019-01-31')['history']['day'])
spy_data=pd.DataFrame(OHLCV('SPY','2018-01-01','2019-01-31')['history']['day'])

alpha(aapl_data['close'],spy['close'])
```
```python
return type : Int

-17.984671751710962
```

***
### Annual Return
Annual return is the return an investment provides over a period of time, expressed as a time-weighted annual percentage.<br><br>
<a href="https://www.investopedia.com/terms/a/annual-return.asp" target="_blank">Learn More</a>

<code>alpha(close,benchmark_close)</code>

| Paramters       | Required/Optional | Description                             | Type |
|-----------------|-------------------|-----------------------------------------|------|
| close           | required         | Close prices data for a year i.e. trading days<257 and trading days>250      | Pandas dataframe  |
| benchmark_close   | reqired          | Close prices data of market or benchmark like SPY, etc | Pandas dataframe |



```python
Example:

from kloudtarder.analysis import alpha
from kloudtrader.equities.data import OHLCV
import pandas as pd

aapl_data=pd.DataFrame(OHLCV('AAPL','2018-01-01','2019-01-31')['history']['day'])
spy_data=pd.DataFrame(OHLCV('SPY','2018-01-01','2019-01-31')['history']['day'])

alpha(aapl_data['close'],spy['close'])
```
```python
return type : Int

-17.984671751710962
```